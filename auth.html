<!DOCTYPE html>

<html lang="en">

<head>
    <script src="theme-init.js"></script>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <title>Sign in â€“ PageBud</title>
    <!-- Put this inline snippet in the <head> of EVERY page BEFORE style.css -->

    <!-- Base styles -->
    <link href="style.css" rel="stylesheet" />
    <link href="auth.css" rel="stylesheet" />
    <!-- Apply saved theme -->

    <!-- 1) Firebase compat SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-storage-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script src="firebase-init.js?v=dev-1"></script>
    <script src="profiles.js"></script>
    <!-- 2) ðŸ”§ Inline config -->
    <script>

        window.__PB_FIREBASE = {
            apiKey: "AIzaSyCEV-dncbQSnP7q9AvF2_Re93l-VHN-2cg",
            authDomain: "pagebud-cb6d9.firebaseapp.com",
            projectId: "pagebud-cb6d9",
            storageBucket: "pagebud-cb6d9.firebasestorage.app",
            messagingSenderId: "974455288174",
            appId: "1:974455288174:web:84d8a2e442ca193391d17f",
            measurementId: "G-TK4VCBT1V9"
        };
    </script>

</head>

<body style="background: var(--background)">
    <div class="auth-shell">
        <div class="auth-card">
            <h1 class="auth-title">PageBud</h1>
            <!-- Google sign in -->
            <button class="btn btn-google" id="googleBtn">
                <i class="fab fa-google"></i> Sign in with Google
            </button>
            <div class="auth-sep"><span>or</span></div>
            <!-- Email/password form -->
            <form class="auth-form" id="emailForm">
                <label>Email</label>
                <input id="email" placeholder="you@example.com" required="" type="email" />
                <label>Password</label>
                <input id="password" minlength="6" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required="" type="password" />
                <div class="row">
                    <button class="btn btn-primary" type="submit">Sign in</button>
                    <button class="btn btn-muted" id="createBtn" type="button">Create account</button>
                </div>
            </form>
            <p class="muted small" style="margin-top:10px">
                Trouble signing in? Make sure your domain is whitelisted in Firebase Auth â†’ Settings â†’ Authorized
                domains.
            </p>
        </div>
    </div>
    <script>
        // --- Auth handlers (runs AFTER firebase-init.js, so fb is defined) ---
        const emailEl = document.getElementById("email");
        const passEl = document.getElementById("password");

        // Google sign in
        document.getElementById("googleBtn").addEventListener("click", async () => {
            try {
                const provider = new firebase.auth.GoogleAuthProvider();
                await fb.auth.signInWithPopup(provider);
                location.href = "index.html";
            } catch (e) {
                alert(e.message || "Google sign-in failed");
            }
        });

        // Email sign in
        document.getElementById("emailForm").addEventListener("submit", async (e) => {
            e.preventDefault();
            try {
                await fb.auth.signInWithEmailAndPassword(emailEl.value.trim(), passEl.value);
                location.href = "index.html";
            } catch (e) {
                alert(e.message || "Sign in failed");
            }
        });

        // Create account
        document.getElementById("createBtn").addEventListener("click", async () => {
            try {
                await fb.auth.createUserWithEmailAndPassword(emailEl.value.trim(), passEl.value);
                location.href = "index.html";
            } catch (e) {
                alert(e.message || "Create account failed");
            }
        });
    </script>
    <!-- Icons -->
    <script defer="" src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/js/all.min.js"></script>
</body>

</html>